(this["webpackJsonpmern-app"]=this["webpackJsonpmern-app"]||[]).push([[6],{110:function(e,a,t){e.exports={auth:"Auth_auth__P__DK",authTitle:"Auth_authTitle__1hINk",authName:"Auth_authName__1zIAM",row:"Auth_row__9DwFN",switchBox:"Auth_switchBox__Vi9QT"}},115:function(e,a,t){"use strict";t.r(a);var n=t(85),r=t.n(n),i=t(86),c=t(99),s=t(13),l=t(0),u=t.n(l),o=t(23),m=t.n(o),p=t(32),d=t(89),v=t(90),b=Object(d.a)(function(){var e=Object(i.a)(r.a.mark((function e(a,t){var n,i,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.login,i=a.body,e.next=3,m.a.post(n?v.a.LOGIN:v.a.SIGN_UP,i,t);case 3:return c=e.sent,s=c.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()),f=t(24),g=t(96),_=t(98),h=t(87),E=t(31),O=t(16),w=t(100),j=t(88),N=t(94),y=t(110),x=t.n(y);a.default=function(){var e=Object(j.a)().addToast,a=Object(O.a)().login,t=Object(l.useState)(!0),n=Object(s.a)(t,2),o=n[0],m=n[1],d=function(){var e,a=Object(p.c)(b),t=Object(s.a)(a,2),n=t[0],r=t[1],i=r.data,c=r.error,l=r.isSuccess;return[n,i,r.isLoading,l,c,c&&(null===(e=c.response)||void 0===e?void 0:e.data)]}(),v=Object(s.a)(d,6),y=v[0],I=v[1],P=v[2],k=v[3],S=v[4],T=v[5],A=Object(w.a)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),C=Object(s.a)(A,3),R=C[0],U=C[1],G=C[2];Object(l.useEffect)((function(){k&&(a(I.user.id,I.user.token),e("success",I.message)),S&&e("danger",T||"Something went wrong")}),[k,S,I]);var L=function(){var e=Object(i.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!o){e.next=6;break}return e.next=4,y({login:!0,body:{email:R.inputs.email.value,password:R.inputs.password.value}});case 4:e.next=13;break;case 6:return(t=new FormData).append("name",R.inputs.name.value),t.append("email",R.inputs.email.value),t.append("password",R.inputs.password.value),t.append("image",R.inputs.image.value),e.next=13,y({body:t});case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{className:x.a.auth},P&&u.a.createElement(E.a,{asOverlay:!0}),u.a.createElement("h2",{className:x.a.authTitle},o?"LOGIN":"REGISTER"),u.a.createElement("hr",null),u.a.createElement("form",{onSubmit:L},!o&&u.a.createElement("div",{className:x.a.row},u.a.createElement(_.a,{id:"name",el:"input",type:"text",label:"Name",className:x.a.authName,errorText:"Please enter a valid name.",validators:[Object(N.c)()],onInput:U}),u.a.createElement(g.a,{id:"image",onInput:U,style:{width:"13rem"},center:!0})),u.a.createElement(_.a,{id:"email",el:"input",type:"text",label:"Email",errorText:"Please enter a valid email.",validators:[Object(N.a)()],onInput:U}),u.a.createElement(_.a,{id:"password",el:"input",type:"text",label:"Password",errorText:"Please enter a valid password (at least 7 characters).",validators:[Object(N.b)(5)],onInput:U}),u.a.createElement(f.a,{size:"big",type:"submit",disabled:!R.isValid},o?"LOGIN":"REGISTER"))),u.a.createElement(h.a,{className:x.a.switchBox},u.a.createElement("h4",null,o?"Do not Register?":"Already register?"),u.a.createElement(f.a,{inverse:!0,onClick:function(){o?G(Object(c.a)(Object(c.a)({},R.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):G(Object(c.a)(Object(c.a)({},R.inputs),{},{name:void 0,image:void 0}),R.inputs.email.isValid&&R.inputs.password.value),m((function(e){return!e}))}},"Switch to ",o?"Register":"Login")))}},87:function(e,a,t){"use strict";var n=t(14),r=t.n(n),i=t(0),c=t.n(i),s=t(91),l=t.n(s);a.a=function(e){var a=e.center,t=e.className,n=e.style,i=e.children,s=c.a.createElement("div",{className:r()(l.a.card,t),style:n},i);return a?c.a.createElement("div",{className:l.a.center},s):s}},91:function(e,a,t){e.exports={card:"Card_card__3G_du",center:"Card_center__2XfKQ"}},96:function(e,a,t){"use strict";var n=t(11),r=t(13),i=t(14),c=t.n(i),s=t(0),l=t.n(s),u=t(24),o=t(97),m=t.n(o);a.a=function(e){var a=e.id,t=e.onInput,i=e.center,o=e.style,p=Object(s.useState)(),d=Object(r.a)(p,2),v=d[0],b=d[1],f=Object(s.useState)(),g=Object(r.a)(f,2),_=g[0],h=g[1],E=Object(s.useState)(!1),O=Object(r.a)(E,2),w=O[0],j=O[1],N=Object(s.useRef)();Object(s.useEffect)((function(){if(v){var e=new FileReader;e.onload=function(){h(e.result)},e.readAsDataURL(v)}}),[v]);return l.a.createElement("div",{className:m.a.formControl,style:o},l.a.createElement("input",{id:a,ref:N,type:"file",accept:".png,.jpg,.jpeg",onChange:function(e){var n,r=e.target.files,i=w;r&&1===r.length?(n=r[0],b(n),j(!0),i=!0):(j(!1),i=!1),t(a,n,i)},style:{display:"none"}}),l.a.createElement("div",{className:c()(m.a.imageUpload,Object(n.a)({},m.a.center,i))},l.a.createElement("div",{className:m.a.imagePreview},_&&l.a.createElement("img",{src:_,alt:"Preview"}),!_&&l.a.createElement("p",null,"Please pick an image.")),l.a.createElement(u.a,{type:"button",size:"small",onClick:function(){N.current.click()}},"PICK IMAGE")))}},97:function(e,a,t){e.exports={formControl:"ImageUpload_formControl__PWJYi",imageUpload:"ImageUpload_imageUpload__37vNi",center:"ImageUpload_center__2SuEp",imagePreview:"ImageUpload_imagePreview__23K0L"}}}]);
//# sourceMappingURL=6.8fd8ca8a.chunk.js.map