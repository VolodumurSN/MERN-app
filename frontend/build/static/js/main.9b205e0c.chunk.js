(this["webpackJsonpmern-app"]=this["webpackJsonpmern-app"]||[]).push([[1],{12:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return _}));var n=a(0),r=a.n(n),c=a(2),l=a(25),o=a(16),i=function(e){var t=e.children,a=Object(l.a)(e,["children"]),n=Object(o.a)().isLoggedIn;return r.a.createElement(c.b,Object.assign({},a,{render:function(){return n?t:r.a.createElement(c.a,{to:a.redirectTo?a.redirectTo:f.AUTH})}}))},s=r.a.lazy((function(){return a.e(5).then(a.bind(null,114))})),u=r.a.lazy((function(){return a.e(4).then(a.bind(null,113))})),m=r.a.lazy((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,111))})),E=r.a.lazy((function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,112))})),d=r.a.lazy((function(){return Promise.all([a.e(0),a.e(6)]).then(a.bind(null,115))})),f={HOME:"/",USER_PLACES:"/:userId/places",NEW_PLACE:"/places/new",EDIT_PLACE:"/places/:placeId",AUTH:"/auth"},_=function(){var e=Object(o.a)().isLoggedIn;return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:f.HOME,exact:!0},r.a.createElement(s,null)),r.a.createElement(c.b,{path:f.USER_PLACES,exact:!0},r.a.createElement(u,null)),r.a.createElement(i,{path:f.NEW_PLACE},r.a.createElement(m,null)),r.a.createElement(i,{path:f.EDIT_PLACE},r.a.createElement(E,null)),!e&&r.a.createElement(c.b,{path:f.AUTH},r.a.createElement(d,null)),r.a.createElement(c.a,{to:f.HOME}))}},16:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a(27),c=function(){return Object(n.useContext)(r.a)}},18:function(e,t,a){e.exports={navigationBtn:"MainNavigation_navigationBtn__3iYgr",navigationHome:"MainNavigation_navigationHome__3aX09",title:"MainNavigation_title__2FdsY",navigationDrawerNav:"MainNavigation_navigationDrawerNav__3-2Dt",navigationHeaderNav:"MainNavigation_navigationHeaderNav__3xSS-"}},19:function(e,t,a){e.exports={navLinks:"NavLinks_navLinks__2pDOg",active:"NavLinks_active__3UbxP"}},20:function(e,t,a){e.exports={overlay:"Spinner_overlay__RojVi",center:"Spinner_center__15Ecw",spinnerBox:"Spinner_spinnerBox__13Q6K",spinnerAnimation:"Spinner_spinnerAnimation__3z1lo",spinnerBall:"Spinner_spinnerBall__31aGT",spinnerCircleBack:"Spinner_spinnerCircleBack__2hcTF"}},21:function(e,t,a){e.exports={toastList:"Toast_toastList__1Ei8C",toastItem:"Toast_toastItem__3EATG",success:"Toast_success__Qpjz2",danger:"Toast_danger__2GAAM",info:"Toast_info__25khq",warning:"Toast_warning__2r-LP",toastContent:"Toast_toastContent__31XP9",toastButton:"Toast_toastButton__6Ss0l"}},24:function(e,t,a){"use strict";var n=a(11),r=a(14),c=a.n(r),l=a(0),o=a.n(l),i=a(5),s=a(8),u=a.n(s);t.a=function(e){var t=e.inverse,a=e.danger,r=e.size,l=e.href,s=e.children,m=e.to,E=e.exact,d=e.type,f=e.onClick,_=e.disabled,b=e.className;return l?o.a.createElement("a",{className:c()(u.a.button,Object(n.a)({},u.a.buttonInverse,t),Object(n.a)({},u.a.buttonDanger,a),u.a[r]),href:l},s):m?o.a.createElement(i.b,{to:m,exact:E,className:c()(u.a.button,Object(n.a)({},u.a.buttonInverse,t),Object(n.a)({},u.a.buttonDanger,a),u.a[r])},s):o.a.createElement("button",{className:c()(u.a.button,Object(n.a)({},u.a.buttonInverse,t),Object(n.a)({},u.a.buttonDanger,a),u.a[r],b),type:d,onClick:f,disabled:_},s)}},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return d}));var n,r=a(13),c=a(23),l=a.n(c),o=a(0),i=a.n(o),s=function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(a){console.log(a)}},u=function(e){try{return JSON.parse(window.localStorage.getItem(e))}catch(t){console.log(t)}},m=function(e){try{window.localStorage.removeItem(e)}catch(t){console.log(t)}},E=Object(o.createContext)({isLoggedIn:!1,token:null,userId:null,login:function(){},logout:function(){}}),d=function(e){var t=e.children,a=u,c=s,d=m,f=Object(o.useState)(null),_=Object(r.a)(f,2),b=_[0],v=_[1],p=Object(o.useState)(null),g=Object(r.a)(p,2),O=g[0],N=g[1],h=Object(o.useState)(),C=Object(r.a)(h,2),T=C[0],j=C[1],k=Object(o.useCallback)((function(e,t,a){!function(e){l.a.defaults.headers.common.Authorization="Bearer ".concat(e)}(t),v(t),N(e);var n=a||new Date((new Date).getTime()+36e5);j(n),c("userData",{userId:e,token:t,expiration:n.toISOString()})}),[]),y=Object(o.useCallback)((function(){v(null),N(null),j(null),d("userData")}),[]);return Object(o.useEffect)((function(){if(b&&T){var e=T.getTime()-(new Date).getTime();n=setTimeout(y,e)}else clearTimeout(n)}),[b,y,T]),Object(o.useEffect)((function(){var e=a("userData");(null===e||void 0===e?void 0:e.token)&&new Date(e.expiration)>new Date&&k(e.userId,e.token,new Date(e.expiration))}),[]),i.a.createElement(E.Provider,{value:{isLoggedIn:!!b,token:b,userId:O,login:k,logout:y}},t)}},31:function(e,t,a){"use strict";var n=a(11),r=a(14),c=a.n(r),l=a(0),o=a.n(l),i=a(20),s=a.n(i),u=function(e){var t=e.asOverlay,a=e.center,r=e.children;return o.a.createElement("div",{className:c()(Object(n.a)({},s.a.overlay,t),Object(n.a)({},s.a.center,a))},r)};t.a=function(e){var t=e.asOverlay,a=e.center,n=o.a.createElement("div",{className:s.a.spinnerBox},o.a.createElement("div",{className:s.a.spinnerCircleBack}),o.a.createElement("div",{className:s.a.spinnerBall}));return t||a?o.a.createElement(u,e,n):n}},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return h}));var n=a(13),r=a(49),c=a(0),l=a.n(c),o=a(84),i=a(25),s=a(14),u=a.n(s),m=a(9),E=a.n(m),d=a(83),f=a(82),_=a(24),b=a(21),v=a.n(b),p=function(e){var t=e.id,a=e.messageType,n=e.content,r=e.removeToast;return Object(c.useEffect)((function(){var e=setTimeout((function(){r(t)}),6e3);return function(){clearTimeout(e)}}),[t,r]),l.a.createElement("div",{className:u()(v.a.toastItem,v.a[a])},l.a.createElement("p",{className:v.a.toastContent},n),l.a.createElement(_.a,{className:v.a.toastButton,onClick:function(){r(t)}}))},g=function(e){var t=e.toastsState,a=Object(i.a)(e,["toastsState"]),n=l.a.createElement("div",{className:v.a.toastList},l.a.createElement(d.a,null,t.map((function(e){return l.a.createElement(f.a,{key:e.id,timeout:200,classNames:"toast",mountOnEnter:!0,unmountOnExit:!0},l.a.createElement(p,Object.assign({key:e.id},e,a)))}))));return E.a.createPortal(n,document.body)},O=Object(c.createContext)({toastsState:[],addToast:function(){},removeToast:function(){}}),N=function(e,t){switch(t.type){case"ADD":return[].concat(Object(r.a)(e),[{id:Object(o.a)(),messageType:t.messageType,content:t.content}]);case"REMOVE":return e.filter((function(e){return e.id!==t.id}));default:return e}},h=function(e){var t=e.children,a=Object(c.useReducer)(N,[]),r=Object(n.a)(a,2),o=r[0],i=r[1],s=Object(c.useCallback)((function(e,t){i({type:"ADD",messageType:e,content:t})}),[]),u=Object(c.useCallback)((function(e){i({type:"REMOVE",id:e})}),[]);return l.a.createElement(O.Provider,{value:{toastsState:o,addToast:s,removeToast:u}},t,l.a.createElement(g,{toastsState:o,removeToast:u}))}},44:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(47),i=a.n(o);t.a=function(e){var t=e.onClick;return l.a.createPortal(r.a.createElement("div",{className:i.a.backdrop,onClick:t}),document.body)}},46:function(e,t,a){e.exports={mainHeader:"MainHeader_mainHeader__24cP_"}},47:function(e,t,a){e.exports={backdrop:"Backdrop_backdrop__kN8TT"}},48:function(e,t,a){e.exports={sideDrawer:"SideDrawer_sideDrawer__FRKkZ"}},52:function(e,t,a){e.exports=a(80)},79:function(e,t,a){},8:function(e,t,a){e.exports={button:"Button_button__A9UiA",buttonInverse:"Button_buttonInverse__d18wo",buttonDanger:"Button_buttonDanger__2DDGe",small:"Button_small__3_ub3",big:"Button_big__3LU2G"}},80:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n),c=a(0),l=a.n(c),o=a(9),i=a.n(o),s=a(32),u=a(5),m=a(12),E=a(13),d=function(e){return l.a.createElement("svg",Object.assign({viewBox:"0 0 128 128"},e),l.a.createElement("defs",null,l.a.createElement("linearGradient",{gradientUnits:"userSpaceOnUse",x1:64,y1:9.951,x2:64,y2:105.94,id:"prefix__a",spreadMethod:"reflect"},l.a.createElement("stop",{offset:0,stopColor:"#4242ed"}),l.a.createElement("stop",{offset:1,stopColor:"#4311b7"}))),l.a.createElement("title",null),l.a.createElement("g",{"data-name":"15 Place Optimization"},l.a.createElement("ellipse",{cx:64,cy:106.06,rx:47.51,ry:12,paintOrder:"fill",fill:"#5545ea"}),l.a.createElement("path",{d:"M64 105.94L82.74 95c-4.56-.5-9.5-.81-14.67-.92z",fill:"#242848",filter:"none"}),l.a.createElement("path",{d:"M35.88 77.82a39.76 39.76 0 1156.24 0L64 105.94z",filter:"none",fill:"url(#prefix__a)"}),l.a.createElement("circle",{cx:64,cy:49.7,r:14.91,transform:"rotate(-45 63.997 49.702)",fillOpacity:.3,fill:"#fff"}),l.a.createElement("path",{d:"M57.46 60.25A14.89 14.89 0 0166 34.94a14.9 14.9 0 100 29.52 14.83 14.83 0 01-8.54-4.21z",fillOpacity:.26,fill:"#7a33ff"})))},f=a(46),_=a.n(f),b=function(e){var t=e.children;return l.a.createElement("div",{className:_.a.mainHeader},t)},v=a(18),p=a.n(v),g=a(2),O=a(16),N=a(24),h=a(19),C=a.n(h),T=function(){var e=Object(O.a)(),t=e.userId,a=e.isLoggedIn,n=e.logout;return l.a.createElement("ul",{className:C.a.navLinks},l.a.createElement("li",null,l.a.createElement(u.c,{to:m.b.HOME,activeClassName:C.a.active,exact:!0},"ALL USERS")),a&&l.a.createElement("li",null,l.a.createElement(u.c,{to:Object(g.f)(m.b.USER_PLACES,{userId:t}),activeClassName:C.a.active},"MY PLACES")),a&&l.a.createElement("li",null,l.a.createElement(u.c,{to:m.b.NEW_PLACE,activeClassName:C.a.active},"ADD PLACE")),!a&&l.a.createElement("li",null,l.a.createElement(u.c,{to:m.b.AUTH,activeClassName:C.a.active},"AUTHENTICATE")),a&&l.a.createElement("li",null,l.a.createElement(N.a,{onClick:n},"LOGOUT")))},j=a(82),k=a(44),y=a(48),S=a.n(y),x=function(e){var t=e.children,a=e.show,n=e.onClose,r=l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(k.a,{onClick:n}),l.a.createElement(j.a,{in:a,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},l.a.createElement("aside",{className:S.a.sideDrawer,onClick:n},t)));return i.a.createPortal(r,document.body)},D=function(e){var t=Object(c.useState)(!1),a=Object(E.a)(t,2),n=a[0],r=a[1],o=function(){r((function(e){return!e}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(x,{show:n,onClose:o},l.a.createElement("nav",{className:p.a.navigationDrawerNav},l.a.createElement(T,null))),l.a.createElement(b,null,l.a.createElement("button",{onClick:o,className:p.a.navigationBtn},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement(u.b,{to:m.b.HOME,className:p.a.navigationHome},l.a.createElement(d,{width:"50",height:"48"}),l.a.createElement("h1",{className:p.a.title},"YourPlaces")),l.a.createElement("nav",{className:p.a.navigationHeaderNav},l.a.createElement(T,null))))},w=a(31),L=a(27),A=a(33),I=function(){return l.a.createElement(L.b,null,l.a.createElement(A.b,null,l.a.createElement(u.a,null,l.a.createElement(D,null),l.a.createElement("main",null,l.a.createElement(c.Suspense,{fallback:l.a.createElement(w.a,{center:!0})},l.a.createElement(m.a,null))))))};a(79);r.a.defaults.baseURL="https://api-yourplaces.herokuapp.com";i.a.render(l.a.createElement(s.a,{config:{queries:{retry:!1}}},l.a.createElement(I,null)),document.getElementById("root"))}},[[52,2,3]]]);
//# sourceMappingURL=main.9b205e0c.chunk.js.map